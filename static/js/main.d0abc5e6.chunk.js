(this["webpackJsonpreact-course-selfmade-project"]=this["webpackJsonpreact-course-selfmade-project"]||[]).push([[0],{123:function(e,t,a){e.exports={modalOverlay:"modalOverlay_modalOverlay__ve06U"}},124:function(e,t,a){e.exports={notFoundPage:"notFoundPage_notFoundPage__abrbU"}},132:function(e,t,a){},14:function(e,t,a){e.exports={stats:"stats_stats__2TaBt",ordersStatus:"stats_ordersStatus__3wC9-",statusOrders:"stats_statusOrders__3p-VU",statusTitle:"stats_statusTitle__2ItnJ",numberOrder:"stats_numberOrder__2MYcz",item:"stats_item__1OZPT",idOrder:"stats_idOrder__1iLjI",idOrder_Green:"stats_idOrder_Green__1kAjX",idOrder_White:"stats_idOrder_White__12hoz",text:"stats_text__28XNX"}},16:function(e,t,a){e.exports={header:"appHeader_header__2whav",navigation:"appHeader_navigation__21G68",menu:"appHeader_menu__1iQ_X",button:"appHeader_button__3q2QZ",logo:"appHeader_logo__25IQu",profile:"appHeader_profile__14gWY",link:"appHeader_link__2639C",linkActive:"appHeader_linkActive__fRKsU"}},18:function(e,t,a){e.exports={feedId:"feedIdDetails_feedId__piaWY",idOrder:"feedIdDetails_idOrder__1lA70",name:"feedIdDetails_name__3Y3Sy",status:"feedIdDetails_status__1GlCH",ingredients:"feedIdDetails_ingredients__3t4d0",ingredient:"feedIdDetails_ingredient__2lPrR",items:"feedIdDetails_items__3I2zT",nameIngredient:"feedIdDetails_nameIngredient__20Z_8",count:"feedIdDetails_count__2KCZI",borderImage:"feedIdDetails_borderImage__3uO2y",image:"feedIdDetails_image__aNNFJ",item:"feedIdDetails_item__AtKr3",cellPrice:"feedIdDetails_cellPrice__12HOc",cell:"feedIdDetails_cell__1dUkH"}},19:function(e,t,a){e.exports={feedId:"feedId_feedId__3ztQN",idOrder:"feedId_idOrder__j5t6g",name:"feedId_name__rE_e1",status:"feedId_status__9SFU5",ingredients:"feedId_ingredients__36HQf",ingredient:"feedId_ingredient__1xBN3",items:"feedId_items__1-y7F",nameIngredient:"feedId_nameIngredient__11flY",count:"feedId_count__3wuRH",borderImage:"feedId_borderImage__3RqLb",image:"feedId_image__3L4DH",item:"feedId_item__agatT",cellPrice:"feedId_cellPrice__17vcd",cell:"feedId_cell__3FhcZ"}},222:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(50),i=a.n(c),s=(a(132),a(72)),o=a.n(s),d=a(227),l=a(126),u=a(12),j=a(2),_=a(52),m=a(73),b=a.n(m),O=a(0);function p(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:b.a.loader,children:[Object(O.jsx)("p",{className:" ".concat(b.a.text," text text_type_main-medium "),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),Object(O.jsx)("div",{className:" ".concat(b.a.spinner," text text_type_digits-large ")})]})})}var x=a(61),f=function(){return Object(x.b)()},h=x.c,g=["children","isAuth"],v=function(e){var t=e.children,a=e.isAuth,n=Object(_.a)(e,g),r=h((function(e){return e.authorization.feedRequest})),c=Object(u.h)();return Object(O.jsxs)(O.Fragment,{children:[r&&Object(O.jsx)(p,{}),!r&&Object(O.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(O.jsx)(u.a,{to:{pathname:"/login",state:{from:n,from_2:c}}})}}))]})},y=["children"],N=function(e){var t=e.children,a=Object(_.a)(e,y),n=h((function(e){return e.authorization.feedRequest})),r=h((function(e){return e.authorization.isAuth}));return Object(O.jsxs)(O.Fragment,{children:[n&&Object(O.jsx)(p,{}),!n&&Object(O.jsx)(u.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){var a=e.location;return r?Object(O.jsx)(u.a,{to:{pathname:"/",state:{from:a}}}):t}}))]})},E="GET_INGREDIENTS_API",I="GET_INGREDIENTS_API_SUCCESS",C="GET_INGREDIENTS_API_FAILED",S="INGREDIENTS_IN_BURGER_CONSTRUCTOR",T="SORT_INGREDIENTS_IN_BURGER_CONSTRUCTOR",R="DELETE_INGREDIENTS_IN_BURGER_CONSTRUCTOR",k="DELETE_ALL_INGREDIENTS_IN_BURGER_CONSTRUCTOR",D="WS_CONNECTION_START",w="WS_CONNECTION_SUCCESS",A="WS_CONNECTION_ERROR",F="WS_CONNECTION_CLOSE",P="WS_GET_ORDERS",U="OPEN_SELECTED_INGREDIENTS",q="CLOSE_SELECTED_INGREDIENT",L="OPEN_ORDER_DETAILS",G="OPEN_BURGER_DETAILS",B="OPEN_ORDER_ERROR",M="GET_ORDER_DETAILS",z="GET_ORDER_DETAILS_SUCCESS",H="GET_ORDER_DETAILS_SUCCESS_FAILED",Q="CALC_PRICE_ORDER_DETAILS",J="SET_SELECTED_ID_INGREDIENTS",X="GET_USER_ORDER_DETAILS",W="GET_USER_ORDER_DETAILS_SUCCESS",K="GET_USER_ORDER_DETAILS_SUCCESS_FAILED",Z="SUCCESS_AUTH",V="AUTH_REQUEST_SUCCESS",Y="AUTH_REQUEST_FAILED",$="GET_REQUEST",ee="GET_USER_REQUEST_SUCCESS",te="GET_USER_REQUEST_FAILED",ae="REFRESH_ACCESS_TOKEN_REQUEST",ne="REFRESH_ACCESS_TOKEN_REQUEST_SUCCESS",re="REFRESH_ACCESS_TOKEN_REQUEST_FAILED",ce="PATCH_USER_REQUEST",ie="PATCH_USER_REQUEST_SUCCESS",se="PATCH_USER_REQUEST_FAILED",oe="EXIT_REQUEST",de="EXIT_REQUEST_SUCCESS",le="EXIT_REQUEST_FAILED",ue="CANCEL_USER_EDIT",je=a(26),_e=a(47),me=a(7),be=a(8),Oe=function(){function e(t){Object(me.a)(this,e),this._url=void 0,this._headers=void 0,this._url=t.url,this._headers=t.headers}return Object(be.a)(e,[{key:"_getResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"_request",value:function(e,t){return fetch(e,t).then(this._getResponse)}},{key:"getIngredients",value:function(){return this._request("".concat(this._url,"/ingredients"),{method:"GET",headers:this._headers})}},{key:"setOrderDetails",value:function(e,t){return this._request("".concat(this._url,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer "+t},body:JSON.stringify({ingredients:e})})}},{key:"getOrderUserDetails",value:function(e){return this._request("".concat(this._url,"/orders/").concat(e),{method:"GET",headers:this._headers})}},{key:"getEmails",value:function(e){return this._request("".concat(this._url,"/password-reset"),{method:"POST",headers:this._headers,body:JSON.stringify({email:e})})}},{key:"resetPassword",value:function(e){return this._request("".concat(this._url,"/password-reset/reset"),{method:"POST",headers:this._headers,body:JSON.stringify({password:e.password,token:e.token})})}},{key:"login",value:function(){var e=Object(_e.a)(Object(je.a)().mark((function e(t){return Object(je.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._request("".concat(this._url,"/auth/login"),{method:"POST",headers:this._headers,body:JSON.stringify({email:t.email,password:t.password})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(_e.a)(Object(je.a)().mark((function e(t){return Object(je.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._request("".concat(this._url,"/auth/register"),{method:"POST",headers:this._headers,body:JSON.stringify({email:t.email,password:t.password,name:t.name})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(_e.a)(Object(je.a)().mark((function e(t){return Object(je.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._request("".concat(this._url,"/auth/logout"),{method:"POST",headers:this._headers,body:JSON.stringify({token:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshToken",value:function(){var e=Object(_e.a)(Object(je.a)().mark((function e(t){return Object(je.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._request("".concat(this._url,"/auth/token"),{method:"POST",headers:this._headers,body:JSON.stringify({token:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(_e.a)(Object(je.a)().mark((function e(t){return Object(je.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._request("".concat(this._url,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer "+t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchUser",value:function(){var e=Object(_e.a)(Object(je.a)().mark((function e(t,a){return Object(je.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._url,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"Bearer "+a},body:JSON.stringify({email:t.email,name:t.name,password:t.password})}).then((function(e){return e.ok,e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),pe=new Oe({url:"https://norma.nomoreparties.space/api",headers:{"Content-Type":"application/json"}}),xe=a(121),fe=a.n(xe),he=a(4),ge=a(16),ve=a.n(ge),ye=a(6),Ne=function(){var e=Object(u.g)();return Object(O.jsx)("header",{className:ve.a.header,children:Object(O.jsxs)("nav",{className:ve.a.navigation,children:[Object(O.jsxs)("ul",{className:ve.a.menu,children:[Object(O.jsx)("li",{children:Object(O.jsxs)("button",{className:"".concat(ve.a.button," text text_type_main-default"),children:[Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)(he.BurgerIcon,{type:"/"===e.location.pathname?"primary":"secondary"})}),Object(O.jsx)(ye.c,{activeClassName:" ".concat(ve.a.linkActive," "),className:" ".concat(ve.a.link," text text_type_main-default text_color_inactive"),to:"/",exact:!0,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(O.jsx)("li",{children:Object(O.jsxs)("button",{className:"".concat(ve.a.button," text text_type_main-default"),children:[Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)(he.ListIcon,{type:"/feed"===e.location.pathname?"primary":"secondary"})}),Object(O.jsx)(ye.c,{activeClassName:" ".concat(ve.a.linkActive," "),className:" ".concat(ve.a.link," text text_type_main-default text_color_inactive"),to:"/feed",exact:!0,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]}),Object(O.jsx)("div",{className:ve.a.logo,children:Object(O.jsx)(ye.b,{to:{pathname:"/"},children:Object(O.jsx)(he.Logo,{})})}),Object(O.jsxs)("button",{className:" ".concat(ve.a.profile," ").concat(ve.a.button," text text_type_main-default"),children:[Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)(he.ProfileIcon,{type:"/profile"===e.location.pathname||"/profile/orders"===e.location.pathname?"primary":"secondary"})}),Object(O.jsx)(ye.c,{activeClassName:" ".concat(ve.a.linkActive," "),className:" ".concat(ve.a.link," text text_type_main-default text_color_inactive"),to:"/profile",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},Ee=a(3),Ie=a(13),Ce={feedRequest:!1,feedFailed:!1,ingredientsGetApi:[],ingredientForConstructor:{bun:[],others:[]}},Se="bun",Te="main",Re="sauce",ke=a(40),De=a.n(ke),we=a(41),Ae=a.n(we),Fe=a(228),Pe=function(e){var t=e.item,a=Object(n.useState)({}),r=Object(Ee.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)([]),o=Object(Ee.a)(s,2),d=o[0],l=o[1],j=Object(u.h)(),_=Object(Fe.a)({type:"ingredients",item:t,collect:function(e){return{isDrag:e.isDragging()}}}),m=Object(Ee.a)(_,2),b=m[0].isDrag,p=m[1],x=h((function(e){return e.getIngredientsApi.ingredientForConstructor}));return Object(n.useEffect)((function(){!function(){var e,t={};i(t),e=[].concat(Object(Ie.a)(Object.values(x)[0]),Object(Ie.a)(Object.values(x)[1])),l(e);for(var a=0;a<e.length;++a){var n=e[a].data.id;void 0!=t[n]?++t[n]:t[n]=1}}()}),[x]),Object(O.jsx)(O.Fragment,{children:!b&&Object(O.jsx)(ye.b,{className:Ae.a.link,to:{pathname:"/ingredients/".concat(t.id),state:{isOpenModalIngredient:j}},children:Object(O.jsxs)("li",{ref:p,className:Ae.a.item,children:[Object(O.jsx)("img",{className:Ae.a.image,src:t.image}),Object(O.jsx)("div",{className:Ae.a.counter,children:d.map((function(e,a){return e.data.id===t.id&&Object(O.jsx)(he.Counter,{count:c[t.id],size:"default"},a)}))}),Object(O.jsxs)("div",{className:Ae.a.price,children:[Object(O.jsx)("p",{className:" ".concat(Ae.a.cost," text text_type_digits-default"),children:t.price}),Object(O.jsx)(he.CurrencyIcon,{type:"primary"})]}),Object(O.jsx)("p",{className:" ".concat(Ae.a.name," text text_type_main-default"),children:t.name})]})})})},Ue=function(){var e=Object(n.useState)(),t=Object(Ee.a)(e,2),a=t[0],r=t[1],c=Object(n.useRef)(null),i=Object(n.useRef)(null),s=Object(n.useRef)(null),o=h((function(e){return e.getIngredientsApi.ingredientsGetApi}));var d=function(e,t){var a=null;return function(){a=setTimeout((function(){e(),a&&clearTimeout(a),a=null}),t)}}(Object(n.useCallback)((function(){var e=document.querySelector("#scrollArea"),t=document.querySelector("#sectionBun"),a=document.querySelector("#sectionSauce"),n=document.querySelector("#sectionMain");if(e&&t&&a&&n){var c=e.getBoundingClientRect().top,i=t.getBoundingClientRect().top,s=a.getBoundingClientRect().top,o=n.getBoundingClientRect().top,d=Math.abs(c-i),l=Math.abs(c-s),u=Math.abs(c-o);r(d<l?"bun":l<u?"sauce":"main")}}),[]),500),l=function(){c.current&&c.current.scrollIntoView({behavior:"smooth",block:"start"})},u=function(){i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start"})},j=function(){s.current&&s.current.scrollIntoView({behavior:"smooth",block:"start"})};return Object(n.useEffect)((function(){c.current&&l(),i.current&&u(),s.current&&j();var e=document.getElementById("scrollArea");if(e)return e.addEventListener("scroll",d),function(){e.removeEventListener("scroll",d)}}),[]),Object(O.jsxs)("section",{className:De.a.burgerIngredients,children:[Object(O.jsx)("h2",{className:" ".concat(De.a.title," text text_type_main-large"),children:"\u0421\u043e\u0431\u0435\u0440\u0438 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(O.jsxs)("div",{className:De.a.tab,children:[Object(O.jsx)(he.Tab,{value:"bun",active:a===Se,onClick:l,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(O.jsx)(he.Tab,{value:"sauce",active:a===Re,onClick:u,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(O.jsx)(he.Tab,{value:"main",active:a===Te,onClick:j,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"})]}),Object(O.jsxs)("div",{className:De.a.ingredients,id:"scrollArea",children:[Object(O.jsx)("h2",{ref:c,className:"text text_type_main-medium test",id:"sectionBun",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(O.jsx)("ul",{className:" ".concat(De.a.card," ingredients"),children:o.filter((function(e){return e.type===Se})).map((function(e){return Object(O.jsx)(Pe,{item:e},e.id)}))}),Object(O.jsx)("h2",{ref:i,className:"text text_type_main-medium",id:"sectionSauce",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(O.jsx)("ul",{className:" ".concat(De.a.card," ingredients "),children:o.filter((function(e){return e.type===Re})).map((function(e){return Object(O.jsx)(Pe,{item:e},e.id)}))}),Object(O.jsx)("h2",{ref:s,className:"text text_type_main-medium",id:"sectionMain",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"}),Object(O.jsx)("ul",{className:" ".concat(De.a.card," ingredients "),children:o.filter((function(e){return e.type===Te})).map((function(e){return Object(O.jsx)(Pe,{item:e},e.id)}))})]})]})},qe=r.a.memo(Ue),Le=a(42),Ge=a.n(Le),Be=a(229),Me=a(97),ze=a.n(Me),He=function(e){var t=e.data,a=e.index,r=f(),c=Object(n.useCallback)((function(){return r(function(e){return function(t){t({type:R,payload:e})}}(a))}),[]),i=Object(n.useCallback)((function(e,t){return r(function(e,t){return function(a){a({type:T,dragIndex:e,hoverIndex:t})}}(e,t))}),[]),s=t.id,o=Object(n.useRef)(null),d=Object(Be.a)({accept:"sortIngredients",collect:function(e){return{handlerId:e.isOver()}},hover:function(e,t){var n;if(o.current){var r=e.index,c=a;if(r!==c){var s=null===(n=o.current)||void 0===n?void 0:n.getBoundingClientRect(),d=(s.bottom-s.top)/2,l=t.getClientOffset();if(s&&l){var u=l.y-s.top;r<c&&u<d||r>c&&u>d||(i(r,c),e.index=c)}}}}}),l=Object(Ee.a)(d,2),u=l[0].handlerId,j=l[1],_=Object(Fe.a)({type:"sortIngredients",item:function(){return{id:s,index:a}},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(Ee.a)(_,2),b=m[0].isDragging?.5:1,p=u?"lightgreen dashed 1px":"transparent";return(0,m[1])(j(o)),Object(O.jsxs)("li",{ref:o,className:ze.a.ingredient,style:{border:p,opacity:b},"data-handler-id":u,children:[Object(O.jsx)("div",{className:ze.a.dragIcon,children:Object(O.jsx)(he.DragIcon,{type:"primary"})}),Object(O.jsx)(he.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image_mobile,handleClose:c})]})},Qe=function(){var e,t,a,r,c,i,s,o,d,l=Object(u.g)(),j=f(),_=function(e){return j(function(e){var t=fe()();return function(a){a({type:S,payload:{data:e,indexIngredient:t}})}}(e))},m=h((function(e){return e.authorization.isAuth})),b=Object(u.h)(),p=Object(Be.a)({accept:"ingredients",drop:function(e){_(e)},collect:function(e){return{isHover:e.isOver()}}}),x=Object(Ee.a)(p,2),g=x[0].isHover,v=x[1],y=g?"lightgreen dashed 1px":"transparent",N=h((function(e){return e.getIngredientsApi.ingredientForConstructor})),E=h((function(e){return e.getOrderDetails.price}));Object(n.useEffect)((function(){var e;j((e=function(){var e=N.bun.map((function(e){return e.data.id})),t=N.others.map((function(e){return e.data.id}));return[].concat(Object(Ie.a)(e),Object(Ie.a)(t),Object(Ie.a)(e))}(),function(t){t({type:J,payload:e})})),j(function(e){return function(t){t({type:Q,payload:e})}}(2*N.bun.reduce((function(e,t){return e+t.data.price}),0)+N.others.reduce((function(e,t){return e+t.data.price}),0)))}),[N,j]);var I=Object(n.useCallback)((function(){N.bun.length?l.push({pathname:"/orderDetails",state:{isOpenModalDetails:b}}):l.push({pathname:"/error",state:{isOpenModalError:b}})}),[N]);return Object(O.jsxs)("section",{ref:v,className:Ge.a.burgerConstructor,style:{border:y},children:[(null===N||void 0===N||null===(e=N.bun[0])||void 0===e?void 0:e.data.id)&&Object(O.jsx)("div",{className:Ge.a.bun,children:Object(O.jsx)(he.ConstructorElement,{type:"top",isLocked:!0,text:" ".concat(null===(t=N.bun[0])||void 0===t?void 0:t.data.name," (\u0432\u0435\u0440\u0445)"),price:null===(a=N.bun[0])||void 0===a?void 0:a.data.price,thumbnail:null===(r=N.bun[0])||void 0===r?void 0:r.data.image_mobile})}),Object(O.jsx)("ul",{className:" ".concat(Ge.a.list," ").concat(Ge.a.ingredients," "),children:null===N||void 0===N||null===(c=N.others)||void 0===c?void 0:c.map((function(e,t){return Object(O.jsx)(He,{data:e.data,index:t},e.indexIngredient)}))}),(null===N||void 0===N||null===(i=N.bun[0])||void 0===i?void 0:i.data.id)&&Object(O.jsx)("div",{className:Ge.a.bun,children:Object(O.jsx)(he.ConstructorElement,{type:"bottom",isLocked:!0,text:" ".concat(null===(s=N.bun[0])||void 0===s?void 0:s.data.name," (\u043d\u0438\u0437)"),price:null===(o=N.bun[0])||void 0===o?void 0:o.data.price,thumbnail:null===(d=N.bun[0])||void 0===d?void 0:d.data.image_mobile})}),E>0&&Object(O.jsxs)("div",{className:Ge.a.buttonOrder,children:[Object(O.jsx)("p",{className:"text text_type_digits-medium",children:E}),Object(O.jsx)("div",{className:"".concat(Ge.a.cellPrice),children:Object(O.jsx)(he.CurrencyIcon,{type:"primary"})}),Object(O.jsx)(he.Button,{onClick:function(){m?I():l.replace({pathname:"/login"})},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Je=r.a.memo(Qe),Xe=a(123),We=a.n(Xe);function Ke(){var e=Object(u.g)(),t=Object(n.useCallback)((function(){e.goBack()}),[]);return Object(O.jsx)("div",{className:We.a.modalOverlay,onClick:t})}var Ze=a(53),Ve=a.n(Ze),Ye=document.querySelector("#modals"),$e=function(e){var t=e.title,a=e.children,r=e.closeModals,c=Object(n.useCallback)((function(e){"Escape"===e.key&&r()}),[]);return Object(n.useEffect)((function(){return document.addEventListener("keydown",c),function(){document.removeEventListener("keydown",c)}}),[]),Ye?i.a.createPortal(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:Ve.a.modal,children:Object(O.jsxs)("div",{className:Ve.a.modalForm,children:[Object(O.jsxs)("div",{className:Ve.a.headerDetails,children:[Object(O.jsx)("p",{className:" ".concat(Ve.a.headerText," text text_type_main-large"),children:t}),Object(O.jsx)("div",{className:Ve.a.closeButton,children:Object(O.jsx)(he.CloseIcon,{type:"primary",onClick:r})})]}),a]})}),Object(O.jsx)(Ke,{})]}),Ye):null},et=a(36),tt=a.n(et);function at(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function nt(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(a=Object(j.a)({path:"/"},a)).expires instanceof Date&&(a.expires=a.expires.toUTCString());var n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in a){n+="; "+r;var c=a[r];!0!==c&&(n+="="+c)}document.cookie=n}function rt(e){nt(e,"",{expire:-1})}var ct=function(){var e,t=h((function(e){return e.getOrderDetails.selectedIdIngredients})),a=f(),r=at("accessToken");Object(n.useEffect)((function(){a(function(e,t){return function(a){a({type:M}),pe.setOrderDetails(e,t).then((function(e){e&&e.success?(a({type:z,payload:[e.order]}),a({type:k})):a({type:H})})).catch((function(e){a({type:H})}))}}(t,r))}),[]);var c=h((function(e){return e.getOrderDetails.feedFailed})),i=h((function(e){return e.getOrderDetails.feedRequest})),s=h((function(e){return e.getOrderDetails.infoOderDetails}));return Object(O.jsxs)(O.Fragment,{children:[c&&Object(O.jsx)("p",{className:" ".concat(tt.a.numberOrder," text text_type_main-medium"),children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430"}),i&&Object(O.jsx)("p",{className:" ".concat(tt.a.numberOrder," text text_type_main-medium"),children:"\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430..."}),!c&&!i&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{className:" ".concat(tt.a.numberOrder," text text_type_digits-large "),children:null===(e=s[0])||void 0===e?void 0:e.number}),Object(O.jsx)("p",{className:" ".concat(tt.a.textIdOrder," text text_type_main-medium "),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(O.jsx)("div",{className:tt.a.loadImage}),Object(O.jsx)("div",{className:tt.a.checkImage,children:Object(O.jsx)(he.CheckMarkIcon,{type:"primary"})}),Object(O.jsx)("p",{className:" ".concat(tt.a.statusOrder," text text_type_main-default "),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(O.jsx)("p",{className:" ".concat(tt.a.status," text text_type_main-default text_color_inactive "),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})};function it(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("p",{className:" text text_type_main-medium p-5 ",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043e\u0447\u043a\u0443 \u0432 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b!"})})}var st=a(31),ot=a.n(st),dt=function(){var e,t,a,r,c,i,s,o=Object(u.i)().id,d=h((function(e){return e.getIngredientsApi.ingredientsGetApi})),l=Object(n.useState)([]),j=Object(Ee.a)(l,2),_=j[0],m=j[1],b=f(),p=Object(n.useCallback)((function(){var e=d.find((function(e){return e.id===o}));e&&m([e])}),[d,o,b]);return Object(n.useEffect)((function(){p()}),[d,o]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{className:ot.a.image,src:null===(e=_[0])||void 0===e?void 0:e.image_large,alt:null===(t=_[0])||void 0===t?void 0:t.name}),Object(O.jsx)("p",{className:" ".concat(ot.a.name," text text_type_main-medium"),children:null===(a=_[0])||void 0===a?void 0:a.name}),Object(O.jsxs)("ul",{className:ot.a.items,children:[Object(O.jsxs)("li",{className:ot.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(O.jsx)("p",{className:" ".concat(ot.a.count," text text_type_digits-default text_color_inactive "),children:null===(r=_[0])||void 0===r?void 0:r.calories})]}),Object(O.jsxs)("li",{className:ot.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(O.jsx)("p",{className:" ".concat(ot.a.count," text text_type_digits-default text_color_inactive "),children:null===(c=_[0])||void 0===c?void 0:c.proteins})]}),Object(O.jsxs)("li",{className:ot.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(O.jsx)("p",{className:" ".concat(ot.a.count," text text_type_digits-default text_color_inactive "),children:null===(i=_[0])||void 0===i?void 0:i.fat})]}),Object(O.jsxs)("li",{className:ot.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(O.jsx)("p",{className:" ".concat(ot.a.count," text text_type_digits-default text_color_inactive "),children:null===(s=_[0])||void 0===s?void 0:s.carbohydrates})]})]})]})},lt=a(18),ut=a.n(lt);function jt(e){var t=(new Date).toISOString(),a=Date.parse(e),n=Date.parse(t),r=1!=Math.round((n-a)/864e5)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":"\u0412\u0447\u0435\u0440\u0430",c=new Date(e),i=String(c),s=i.indexOf("GMT"),o=i.slice(s,s+6);return r+", "+c.getHours()+":"+c.getMinutes()+" i-"+o}var _t=function(){var e=f(),t=Object(u.i)().id,a=h((function(e){return e.orders.data})),r=h((function(e){return e.getIngredientsApi.ingredientsGetApi})),c=Object(n.useState)(0),i=Object(Ee.a)(c,2),s=i[0],o=i[1],d=Object(n.useState)(),l=Object(Ee.a)(d,2),j=l[0],_=l[1],m=Object(n.useState)([]),b=Object(Ee.a)(m,2),p=b[0],x=b[1],g=Object(n.useState)({}),v=Object(Ee.a)(g,2),y=v[0],N=v[1],E=Object(n.useState)(),I=Object(Ee.a)(E,2),C=I[0],S=I[1],T=Object(n.useCallback)((function(){var e,n=null===(e=a[0])||void 0===e?void 0:e.orders.find((function(e){return e.number===Number(t)}));_(n);var c=0,i=[],s=[],d=0;if(void 0!=(null===n||void 0===n?void 0:n.ingredients))for(;d<=(null===n||void 0===n?void 0:n.ingredients.length);)r.map((function(e){e.id===n.ingredients[d]&&(c+=e.price,i.push(e.image_mobile),s.push(e))})),d++,o(c);for(var l={},u=0;u<s.length;++u){var j=s[u].id;if(!j)return;void 0!=l[j]?++l[j]:l[j]=1}N(l);var m=new Set(s),b=Array.from(m);x(b),void 0!=(null===n||void 0===n?void 0:n.createdAt)&&S(jt(null===n||void 0===n?void 0:n.createdAt))}),[a]);return Object(n.useEffect)((function(){e((function(e){e({type:G})}))}),[]),Object(n.useEffect)((function(){T()}),[a]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:ut.a.feedId,children:[Object(O.jsxs)("h2",{className:" ".concat(ut.a.idOrder," text text_type_digits-default "),children:["# ",null===j||void 0===j?void 0:j.number]}),Object(O.jsx)("p",{className:" ".concat(ut.a.name," text text_type_main-medium "),children:null===j||void 0===j?void 0:j.name}),Object(O.jsx)("p",{className:" ".concat(ut.a.status," text text_type_main-default "),children:"done"===(null===j||void 0===j?void 0:j.status)?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(O.jsx)("p",{className:" ".concat(ut.a.ingredients," text text_type_main-medium "),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(O.jsx)("ul",{className:" ".concat(ut.a.ingredient," "),children:p.map((function(e,t){return Object(O.jsxs)("li",{className:" ".concat(ut.a.items," mb-5"),children:[Object(O.jsxs)("div",{className:ut.a.nameIngredient,children:[Object(O.jsx)("div",{className:" ".concat(ut.a.borderImage," "),children:Object(O.jsx)("img",{className:ut.a.image,src:null===e||void 0===e?void 0:e.image_mobile,alt:null===e||void 0===e?void 0:e.image_mobile})}),Object(O.jsx)("p",{className:"text text_type_main-default mr-4 ml-4",children:null===e||void 0===e?void 0:e.name})]}),Object(O.jsxs)("div",{className:" ".concat(ut.a.item," "),children:[Object(O.jsx)("p",{className:"text text_type_digits-default",children:y[e.id]>1?y[e.id]:"1"}),Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:"\xa0x"}),Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:"".concat(null===e||void 0===e?void 0:e.price)}),Object(O.jsx)(he.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(O.jsxs)("div",{className:ut.a.cellPrice,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:C}),Object(O.jsxs)("div",{className:ut.a.cell,children:[Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:s}),Object(O.jsx)(he.CurrencyIcon,{type:"primary"})]})]})]})})},mt=function(e){var t=null;return function(a){a({type:ae,payload:e}),pe.refreshToken(e).then((function(e){e&&e.success?null!=(t=e.accessToken.split("Bearer ")[1])&&(nt("accessToken",t,{"max-age":1200}),nt("refreshToken",e.refreshToken),a({type:ne})):a({type:re})})).then((function(){pe.getUser(t).then((function(e){e&&e.success?a({type:ee,payload:e.user}):a({type:te})}))})).catch((function(e){a({type:re})}))}},bt=a(32),Ot=a.n(bt),pt=a(30);function xt(e){var t=Object(n.useState)(e),a=Object(Ee.a)(t,2),r=a[0],c=a[1];return{values:r,handleChange:function(e){var t=e.target,a=t.value,n=t.name;c(Object(j.a)(Object(j.a)({},r),{},Object(pt.a)({},n,a)))},setValues:c}}var ft,ht=function(){var e=xt({email:"",password:""}),t=e.values,a=e.handleChange,n=f();return Object(O.jsxs)("div",{className:Ot.a.login,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(O.jsxs)("form",{className:Ot.a.form,onSubmit:function(e){var a;e.preventDefault(),n((a=t,function(e){e({type:$}),pe.login(a).then((function(t){t&&t.success?(0===t.accessToken.indexOf("Bearer")&&(nt("accessToken",t.accessToken.split("Bearer ")[1],{"max-age":1200}),nt("refreshToken",t.refreshToken)),e({type:V,payload:t.user})):e({type:Y,payload:t.message})})).catch((function(t){e({type:Y})}))}))},children:[Object(O.jsx)("div",{className:Ot.a.email,children:Object(O.jsx)(he.Input,{type:"email",placeholder:"E-mail",onChange:a,value:"".concat(null===t||void 0===t?void 0:t.email),name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(O.jsx)(he.PasswordInput,{onChange:a,value:"".concat(null===t||void 0===t?void 0:t.password),name:"password"}),Object(O.jsx)("div",{className:Ot.a.button,children:Object(O.jsx)(he.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(O.jsxs)("div",{className:"".concat(Ot.a.input," text text_type_main-default text_color_inactive"),children:[Object(O.jsx)("p",{className:Ot.a.paragraf,children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(O.jsx)(ye.b,{className:Ot.a.link,to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(O.jsxs)("div",{className:"".concat(Ot.a.input," ").concat(Ot.a.input_margin," text text_type_main-default text_color_inactive"),children:[Object(O.jsx)("p",{className:Ot.a.paragraf,children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(O.jsx)(ye.b,{className:Ot.a.link,to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},gt=a(37),vt=a.n(gt),yt=function(){var e=xt({email:"",password:"",name:""}),t=e.values,a=e.handleChange,r=Object(n.useRef)(null),c=Object(u.g)(),i=Object(n.useCallback)((function(){c.replace({pathname:"/login"})}),[c]);return Object(O.jsxs)("div",{className:vt.a.register,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(O.jsxs)("form",{className:vt.a.form,onSubmit:function(e){e.preventDefault(),pe.register(t).then((function(e){!0===e.success&&i()}))},children:[Object(O.jsx)("div",{className:"".concat(vt.a.input_margin),children:Object(O.jsx)(he.Input,{type:"text",placeholder:"\u0438\u043c\u044f",onChange:a,value:"".concat(null===t||void 0===t?void 0:t.name),name:"name",error:!1,ref:r,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(O.jsx)("div",{className:vt.a.email,children:Object(O.jsx)(he.Input,{type:"email",placeholder:"E-mail",onChange:a,value:"".concat(null===t||void 0===t?void 0:t.email),name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(O.jsx)(he.PasswordInput,{onChange:a,value:"".concat(null===t||void 0===t?void 0:t.password),name:"password"}),Object(O.jsx)("div",{className:vt.a.button,children:Object(O.jsx)(he.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(O.jsxs)("div",{className:"".concat(vt.a.input," text text_type_main-default text_color_inactive"),children:[Object(O.jsx)("p",{className:vt.a.paragraf,children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(O.jsx)(ye.b,{className:vt.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Nt=a(43),Et=a.n(Nt),It=function(){var e=xt({email:""}),t=e.values,a=e.handleChange,r=Object(u.g)(),c=Object(n.useCallback)((function(){r.replace({pathname:"/reset-password"})}),[r]),i=Object(n.useCallback)((function(e){e.preventDefault(),pe.getEmails("".concat(t.email)).then((function(e){!0===e.success&&(nt("forgotPassword",e.success,{expires:200}),c())}))}),[t]);return Object(O.jsxs)("div",{className:Et.a.forgotPassword,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(O.jsxs)("form",{className:Et.a.form,children:[Object(O.jsx)("div",{className:Et.a.email,children:Object(O.jsx)(he.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:a,value:"".concat(t.email),name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(O.jsx)("div",{className:Et.a.button,children:Object(O.jsx)(he.Button,{onClick:i,type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(O.jsxs)("div",{className:"".concat(Et.a.input," text text_type_main-default text_color_inactive"),children:[Object(O.jsx)("p",{className:Et.a.paragraf,children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(O.jsx)(ye.b,{className:Et.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Ct=a(44),St=a.n(Ct),Tt=function(){var e=xt({password:"",token:""}),t=e.values,a=e.handleChange,r=Object(u.g)();if(!at("forgotPassword"))return Object(O.jsx)(u.a,{to:{pathname:"/forgot-password"}});var c=Object(n.useCallback)((function(){r.replace({pathname:"/login"})}),[r]),i=Object(n.useCallback)((function(e){e.preventDefault(),pe.resetPassword(t).then((function(e){!0===e.success&&c()}))}),[t]);return Object(O.jsxs)("div",{className:St.a.resetPassword,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(O.jsx)("div",{className:"".concat(St.a.input_margin),children:Object(O.jsx)(he.PasswordInput,{value:"".concat(null===t||void 0===t?void 0:t.password),onChange:a,name:"password"})}),Object(O.jsxs)("form",{className:"".concat(St.a.form),onSubmit:i,children:[Object(O.jsx)("div",{className:"".concat(St.a.input_margin),children:Object(O.jsx)(he.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:a,value:"".concat(null===t||void 0===t?void 0:t.token),name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(O.jsx)("div",{className:St.a.button,children:Object(O.jsx)(he.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(O.jsxs)("div",{className:"".concat(St.a.input," text text_type_main-default text_color_inactive"),children:[Object(O.jsx)("p",{className:St.a.paragraf,children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(O.jsx)(ye.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Rt=a(48),kt=a.n(Rt),Dt=function(){var e=f(),t=at("refreshToken");return Object(O.jsxs)("nav",{className:kt.a.nav,children:[Object(O.jsx)(ye.c,{activeClassName:"".concat(kt.a.link_activ\u0435),className:" ".concat(kt.a.link," text text_type_main-medium text_color_inactive"),to:"/profile",exact:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(O.jsx)(ye.c,{activeClassName:"".concat(kt.a.link_activ\u0435),className:" ".concat(kt.a.link," text text_type_main-medium text_color_inactive"),to:"/profile/orders",exact:!0,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(O.jsx)(ye.c,{onClick:function(){e(function(e){return function(t){t({type:oe}),pe.logout(e).then((function(e){e&&e.success?(rt("refreshToken"),rt("accessToken"),t({type:de})):t({type:le})})).catch((function(e){t({type:le})}))}}(t))},className:" ".concat(kt.a.link," text text_type_main-medium text_color_inactive"),to:"/login",children:"\u0412\u044b\u0445\u043e\u0434"})]})},wt=a(34),At=a.n(wt),Ft=function(){var e=xt({name:"",email:"",password:"",buttonActive:!1}),t=e.values,a=e.setValues,r=h((function(e){return e.authorization.user.email})),c=h((function(e){return e.authorization.user.name})),i=h((function(e){return e.authorization.error})),s=h((function(e){return e.authorization.feedRequestPatchUser})),o=f(),d=at("accessToken"),l=function(e){var n,r=e.target,c=r.value,i=r.name;a(Object(j.a)(Object(j.a)({},t),{},(n={},Object(pt.a)(n,i,c),Object(pt.a)(n,"buttonActive",!0),n)))},u=Object(n.useCallback)((function(e){e.preventDefault(),a(Object(j.a)(Object(j.a)({},t),{},{buttonActive:!0})),o(function(e,t){return function(a){a({type:ce}),pe.patchUser(e,t).then((function(e){e&&e.success?a({type:ie,payload:e}):a({type:se,payload:e.message})})).catch((function(e){a({type:se})}))}}(t,d))}),[t]),_=Object(n.useCallback)((function(e){e.preventDefault(),a({name:"".concat(c),email:"".concat(r),password:"",buttonActive:!1})}),[t]);return Object(n.useEffect)((function(){a({name:c||"",email:r||"",password:"",buttonActive:!1})}),[r,c]),Object(O.jsxs)(O.Fragment,{children:[s&&Object(O.jsx)(p,{}),!s&&Object(O.jsxs)("div",{className:At.a.profile,children:[Object(O.jsxs)("div",{className:At.a.menuProfile,children:[Object(O.jsx)(Dt,{}),Object(O.jsx)("div",{className:"".concat(At.a.paragraf," text text_type_main-default text_color_inactive"),children:Object(O.jsx)("p",{children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})})]}),Object(O.jsx)("div",{className:At.a.editForm,children:Object(O.jsxs)("form",{className:At.a.form,onSubmit:u,children:[Object(O.jsxs)("div",{className:"".concat(At.a.input," ").concat(At.a.input_margin),children:[Object(O.jsx)(he.Input,{type:"text",placeholder:"\u0438\u043c\u044f",icon:"EditIcon",onChange:l,value:"".concat(null===t||void 0===t?void 0:t.name),name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(O.jsxs)("div",{className:At.a.email,children:[Object(O.jsx)(he.EmailInput,{onChange:l,value:"".concat(null===t||void 0===t?void 0:t.email),name:"email"}),i&&Object(O.jsxs)("p",{className:"input__error text_type_main-default",children:["\u043e\u0448\u0438\u0431\u043a\u0430: ",i," "]})]}),Object(O.jsx)(he.PasswordInput,{onChange:l,value:"".concat(null===t||void 0===t?void 0:t.password),name:"password"})]}),Object(O.jsxs)("div",{className:At.a.button,children:[Object(O.jsx)(he.Button,{disabled:!(null!==t&&void 0!==t&&t.buttonActive),type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(O.jsx)(he.Button,{disabled:!(null!==t&&void 0!==t&&t.buttonActive),onClick:_,type:"primary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})})]})]})},Pt=a(25),Ut=a.n(Pt),qt=function(){var e=Object(u.i)().id,t=h((function(e){return e.getIngredientsApi.ingredientsGetApi})),a=Object(n.useState)(),r=Object(Ee.a)(a,2),c=r[0],i=r[1],s=Object(n.useCallback)((function(){i(t.find((function(t){return t.id===e})))}),[t]);return Object(n.useEffect)((function(){s()}),[t,e]),Object(O.jsxs)("div",{className:Ut.a.ingredients,children:[Object(O.jsx)("h2",{className:"text text_type_main-medium",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(O.jsx)("img",{className:Ut.a.image,src:null===c||void 0===c?void 0:c.image_large,alt:null===c||void 0===c?void 0:c.name}),Object(O.jsx)("p",{className:" ".concat(Ut.a.name," text text_type_main-medium "),children:null===c||void 0===c?void 0:c.name}),Object(O.jsxs)("ul",{className:Ut.a.items,children:[Object(O.jsxs)("li",{className:Ut.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(O.jsx)("p",{className:" ".concat(Ut.a.count," text text_type_digits-default text_color_inactive "),children:null===c||void 0===c?void 0:c.calories})]}),Object(O.jsxs)("li",{className:Ut.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(O.jsx)("p",{className:" ".concat(Ut.a.count," text text_type_digits-default text_color_inactive "),children:null===c||void 0===c?void 0:c.proteins})]}),Object(O.jsxs)("li",{className:Ut.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(O.jsx)("p",{className:" ".concat(Ut.a.count," text text_type_digits-default text_color_inactive "),children:null===c||void 0===c?void 0:c.fat})]}),Object(O.jsxs)("li",{className:Ut.a.item,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(O.jsx)("p",{className:" ".concat(Ut.a.count," text text_type_digits-default text_color_inactive "),children:null===c||void 0===c?void 0:c.carbohydrates})]})]})]})},Lt=a(35),Gt=a.n(Lt),Bt=a(62),Mt=a.n(Bt),zt=function(e){var t=e.item,a=e.burger,r=e.countData,c=e.indexStyle,i=Object(n.useState)({}),s=Object(Ee.a)(i,2),o=s[0],d=s[1];Object(n.useEffect)((function(){!function(){for(var e={},t=0;t<r.length;++t){var a=r[t].id;void 0!=e[a]?++e[a]:e[a]=1}d(e)}()}),[r]);var l={margin:"0 0 0 -20px",zIndex:c};return Object(O.jsx)("li",{style:l,children:Object(O.jsxs)("div",{className:Mt.a.filling,children:[a.filter((function(e){return"bun"!=e.type})).map((function(e,a){return e.id===t.id&&Object(O.jsx)("p",{className:"".concat(Mt.a.count," text text_type_digits-default"),children:o[t.id]>1?"+"+o[t.id]:""},a)})),Object(O.jsx)("img",{className:Mt.a.image,src:t.image}),a.filter((function(e){return"bun"!=e.type})).map((function(e,a){return e.id===t.id&&o[t.id]>1?Object(O.jsx)("div",{className:Mt.a.imageFilter},a+100):""}))]})})},Ht=function(e){var t=e.card,a=Object(n.useState)(0),r=Object(Ee.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)([]),o=Object(Ee.a)(s,2),d=o[0],l=o[1],j=Object(n.useState)([]),_=Object(Ee.a)(j,2),m=_[0],b=_[1],p=Object(u.h)(),x=h((function(e){return e.getIngredientsApi.ingredientsGetApi})),f=Object(n.useState)(),g=Object(Ee.a)(f,2),v=g[0],y=g[1];return Object(n.useEffect)((function(){!function(){for(var e=0,a=[],n=[],r=0;r<=t.ingredients.length;)x.map((function(c){c.id===t.ingredients[r]&&(e+=c.price,a.push(c.image_mobile),n.push(c))})),r++,i(e),l(n);var c=new Set(n),s=Array.from(c),o=s.filter((function(e){return"bun"==e.type})),d=[].concat(Object(Ie.a)(s),Object(Ie.a)(o));b(d),y(jt(t.createdAt))}()}),[x]),Object(O.jsx)(ye.b,{className:Gt.a.link,to:{pathname:"/feed/".concat(t.number),state:{isOpenModalFeed:p}},children:Object(O.jsxs)("li",{className:Gt.a.orders,children:[Object(O.jsxs)("div",{className:Gt.a.numberOrder,children:[Object(O.jsxs)("h2",{className:" ".concat(Gt.a.idOrder," text text_type_digits-default "),children:["# ",t.number]}),Object(O.jsx)("p",{className:" text text_type_main-default text_color_inactive ",children:v})]}),Object(O.jsx)("p",{className:" ".concat(Gt.a.burgerName," text text_type_main-medium "),children:t.name}),Object(O.jsxs)("div",{className:Gt.a.ingredients,children:[Object(O.jsx)("ul",{className:Gt.a.fillings,children:m.map((function(e,t){return Object(O.jsx)(zt,{indexStyle:m.length-t,burger:m,item:e,countData:d},t)}))}),Object(O.jsxs)("div",{className:Gt.a.cellPrice,children:[Object(O.jsx)("p",{className:"".concat(Gt.a.cell," text text_type_digits-medium mr-2"),children:c}),Object(O.jsx)(he.CurrencyIcon,{type:"primary"})]})]})]})})},Qt=a(14),Jt=a.n(Qt),Xt=function(){var e,t,a,n,r,c=h((function(e){return e.orders.data})),i=0,s=0,o=[];if(void 0!=(null===(e=c[0])||void 0===e?void 0:e.orders))for(;i<(null===(d=c[0])||void 0===d?void 0:d.orders.length);){for(var d,l=0,u=[];l<10;){var j;u.push(null===(j=c[0])||void 0===j?void 0:j.orders[s]),l++,s++}o.push(u),i+=l}return Object(O.jsxs)("section",{className:Jt.a.stats,children:[Object(O.jsxs)("div",{className:Jt.a.ordersStatus,children:[Object(O.jsxs)("div",{className:Jt.a.statusOrders,children:[Object(O.jsx)("h2",{className:" ".concat(Jt.a.statusTitle," text text_type_main-medium "),children:"\u0413\u043e\u0442\u043e\u0432\u044b: "}),Object(O.jsx)("div",{className:" ".concat(Jt.a.numberOrder," "),children:o.map((function(e,t){return Object(O.jsx)("ul",{className:Jt.a.item,children:e.filter((function(e){return"done"===(null===e||void 0===e?void 0:e.status)})).map((function(e,t){return Object(O.jsx)("li",{className:" ".concat(Jt.a.idOrder," ").concat(Jt.a.idOrder_Green," text text_type_digits-default "),children:e.number},t)}))},t)}))})]}),Object(O.jsxs)("div",{className:Jt.a.statusOrders,children:[Object(O.jsx)("h2",{className:" ".concat(Jt.a.statusTitle," text text_type_main-medium "),children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435: "}),Object(O.jsx)("ul",{className:Jt.a.item,children:null===(t=c[0])||void 0===t||null===(a=t.orders)||void 0===a?void 0:a.filter((function(e){return"done"!=(null===e||void 0===e?void 0:e.status)})).map((function(e){return Object(O.jsx)("li",{className:" ".concat(Jt.a.idOrder," ").concat(Jt.a.idOrder_White," text text_type_digits-default "),children:e.number},e._id)}))})]})]}),Object(O.jsx)("h3",{className:" ".concat(Jt.a.text," text text_type_main-medium "),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(O.jsx)("p",{className:" ".concat(Jt.a.numberOrder," text text_type_digits-large "),children:null===(n=c[0])||void 0===n?void 0:n.total}),Object(O.jsx)("h3",{className:" ".concat(Jt.a.text," text text_type_main-medium "),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(O.jsx)("p",{className:" ".concat(Jt.a.numberOrder," text text_type_digits-large "),children:null===(r=c[0])||void 0===r?void 0:r.totalToday})]})},Wt=a(54),Kt=a.n(Wt),Zt=function(){var e,t,a=h((function(e){return e.orders.feedRequest})),r=h((function(e){return e.orders.feedFailed})),c=h((function(e){return e.orders.data})),i=f();return Object(n.useEffect)((function(){return i({type:D,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){i({type:F})}}),[]),Object(O.jsxs)(O.Fragment,{children:[r&&Object(O.jsx)("h2",{className:"text text_type_main-large",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),a&&Object(O.jsx)(p,{}),!a&&!r&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:Kt.a.header,children:Object(O.jsx)("h2",{className:"".concat(Kt.a.title," text text_type_main-large"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(O.jsxs)("section",{className:Kt.a.feed,children:[Object(O.jsx)("div",{className:Kt.a.orders,children:Object(O.jsx)("ul",{className:Kt.a.cards,children:null===(e=c[0])||void 0===e||null===(t=e.orders)||void 0===t?void 0:t.map((function(e){return Object(O.jsx)(Ht,{card:e},e._id)}))})}),Object(O.jsx)(Xt,{})]})]})]})},Vt=a(55),Yt=a.n(Vt),$t=a(33),ea=a.n($t),ta=function(e){var t=e.card,a=Object(n.useState)(0),r=Object(Ee.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)([]),o=Object(Ee.a)(s,2),d=o[0],l=o[1],j=Object(n.useState)([]),_=Object(Ee.a)(j,2),m=_[0],b=_[1],p=Object(u.h)(),x=h((function(e){return e.getIngredientsApi.ingredientsGetApi})),f=Object(n.useState)(),g=Object(Ee.a)(f,2),v=g[0],y=g[1];return Object(n.useEffect)((function(){!function(){for(var e=0,a=[],n=[],r=0;r<=(null===t||void 0===t||null===(c=t.ingredients)||void 0===c?void 0:c.length);){var c;x.map((function(c){c.id===t.ingredients[r]&&(e+=c.price,a.push(c.image_mobile),n.push(c))})),r++,i(e),l(n)}var s=new Set(n),o=Array.from(s),d=o.filter((function(e){return"bun"==e.type})),u=[].concat(Object(Ie.a)(o),Object(Ie.a)(d));b(u);var j=jt(t.createdAt);y(j)}()}),[x]),Object(O.jsxs)(O.Fragment,{children:[!t&&Object(O.jsx)("h2",{className:"text text_type_main-large",children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),t&&Object(O.jsx)(ye.b,{className:ea.a.link,to:{pathname:"/profile/orders/".concat(t.number),state:{isOpenModalOrder:p}},children:Object(O.jsxs)("li",{className:" ".concat(ea.a.cardOrder," mb-6"),children:[Object(O.jsxs)("div",{className:ea.a.numberOrder,children:[Object(O.jsxs)("h2",{className:" ".concat(ea.a.idOrder," text text_type_digits-default "),children:["# ",t.number]}),Object(O.jsx)("p",{className:" text text_type_main-default text_color_inactive ",children:v})]}),Object(O.jsx)("p",{className:" ".concat(ea.a.burgerName," text text_type_main-large "),children:t.name}),Object(O.jsx)("p",{className:" ".concat(ea.a.statusOrder," text text_type_main-medium mt-2 ml-6 mb-6"),children:"done"===t.status&&"\u0413\u043e\u0442\u043e\u0432"}),Object(O.jsxs)("div",{className:" ".concat(ea.a.ingredients," pb-6"),children:[Object(O.jsx)("ul",{className:ea.a.fillings,children:m.map((function(e,t){return Object(O.jsx)(zt,{indexStyle:m.length-t,burger:m,item:e,countData:d},t)}))}),Object(O.jsxs)("div",{className:ea.a.cellPrice,children:[Object(O.jsx)("p",{className:"".concat(ea.a.cell," text text_type_digits-medium mr-2"),children:c}),Object(O.jsx)(he.CurrencyIcon,{type:"primary"})]})]})]})})]})},aa=function(){var e,t=h((function(e){return e.orders.feedRequest})),a=h((function(e){return e.orders.feedFailed})),r=at("accessToken"),c="wss://norma.nomoreparties.space/orders?token=".concat(r),i=h((function(e){return e.orders.data})),s=i[0]?Array.from(null===(e=i[0])||void 0===e?void 0:e.orders).reverse():[],o=f();return Object(n.useEffect)((function(){return o({type:D,payload:c}),function(){o({type:F})}}),[]),Object(O.jsxs)(O.Fragment,{children:[a&&Object(O.jsx)("h2",{className:"text text_type_main-large",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),t&&Object(O.jsx)(p,{}),!t&&!a&&Object(O.jsxs)("div",{className:Yt.a.orders,children:[Object(O.jsxs)("div",{className:Yt.a.menuProfile,children:[Object(O.jsx)(Dt,{}),Object(O.jsx)("div",{className:"".concat(Yt.a.paragraf," text text_type_main-default text_color_inactive"),children:Object(O.jsx)("p",{children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]}),Object(O.jsx)("div",{className:Yt.a.ordersList,children:Object(O.jsx)("ul",{className:Yt.a.cardOrder,children:s.map((function(e){return Object(O.jsx)(ta,{card:e},e._id)}))})})]})]})},na=a(124),ra=a.n(na),ca=function(){return Object(O.jsx)("div",{className:ra.a.notFoundPage,children:Object(O.jsx)("h2",{className:"text text_type_main-medium",children:"\u041e\u0448\u0438\u0431\u043a\u0430 404. \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})},ia=a(19),sa=a.n(ia),oa=function(){var e,t,a,r=Object(u.i)().id,c=f(),i=h((function(e){return e.getOrderDetails.orderDetails})),s=h((function(e){return e.getIngredientsApi.ingredientsGetApi})),o=Object(n.useState)(0),d=Object(Ee.a)(o,2),l=d[0],j=d[1],_=Object(n.useState)([]),m=Object(Ee.a)(_,2),b=m[0],p=m[1],x=Object(n.useState)([]),g=Object(Ee.a)(x,2),v=g[0],y=g[1],N=Object(n.useState)({}),E=Object(Ee.a)(N,2),I=E[0],C=E[1],S=Object(n.useState)(),T=Object(Ee.a)(S,2),R=T[0],k=T[1],D=Object(n.useState)([]),w=Object(Ee.a)(D,2),A=w[0],F=w[1];return Object(n.useEffect)((function(){c(function(e){return function(t){t({type:X}),pe.getOrderUserDetails(e).then((function(e){e&&e.success?t({type:W,payload:e}):t({type:K})})).catch((function(e){t({type:K})}))}}(r))}),[]),Object(n.useEffect)((function(){F(i),function(){var e;null!==(e=A[0])&&void 0!==e&&e.success&&function(){var e,t=null===(e=i[0])||void 0===e?void 0:e.orders[0];p([t]);for(var a=0,n=[],r=[],c=0;c<=(null===t||void 0===t||null===(o=t.ingredients)||void 0===o?void 0:o.length);){var o;s.map((function(e){(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.ingredients[c])&&(a+=null===e||void 0===e?void 0:e.price,n.push(null===e||void 0===e?void 0:e.image_mobile),r.push(e))})),c++,j(a)}for(var d={},l=0;l<(null===r||void 0===r?void 0:r.length);++l){var u,_=null===(u=r[l])||void 0===u?void 0:u.id;void 0!=d[_]?++d[_]:d[_]=1}C(d);var m=new Set(r),b=Array.from(m);y(b),k(jt(null===t||void 0===t?void 0:t.createdAt))}()}()}),[A,i]),Object(O.jsxs)("div",{className:sa.a.feedId,children:[Object(O.jsxs)("h2",{className:" ".concat(sa.a.idOrder," text text_type_digits-default "),children:["# ",null===(e=b[0])||void 0===e?void 0:e.number]}),Object(O.jsx)("p",{className:" ".concat(sa.a.name," text text_type_main-medium "),children:null===(t=b[0])||void 0===t?void 0:t.name}),Object(O.jsx)("p",{className:" ".concat(sa.a.status," text text_type_main-default "),children:"done"===(null===(a=b[0])||void 0===a?void 0:a.status)?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(O.jsx)("p",{className:" ".concat(sa.a.ingredients," text text_type_main-medium "),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(O.jsx)("ul",{className:" ".concat(sa.a.ingredient," "),children:null===v||void 0===v?void 0:v.map((function(e,t){return Object(O.jsxs)("li",{className:" ".concat(sa.a.items," mb-5"),children:[Object(O.jsxs)("div",{className:sa.a.nameIngredient,children:[Object(O.jsx)("div",{className:" ".concat(sa.a.borderImage," "),children:Object(O.jsx)("img",{className:sa.a.image,src:null===e||void 0===e?void 0:e.image_mobile,alt:null===e||void 0===e?void 0:e.image_mobile})}),Object(O.jsx)("p",{className:"text text_type_main-default mr-4 ml-4",children:e.name})]}),Object(O.jsxs)("div",{className:" ".concat(sa.a.item," "),children:[Object(O.jsx)("p",{className:"text text_type_digits-default",children:I[e.id]>1?I[e.id]:"1"}),Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:"\xa0x"}),Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:"".concat(e.price)}),Object(O.jsx)(he.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(O.jsxs)("div",{className:sa.a.cellPrice,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:R}),Object(O.jsxs)("div",{className:sa.a.cell,children:[Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:l}),Object(O.jsx)(he.CurrencyIcon,{type:"primary"})]})]})]})},da=function(){var e,t,a,r,c,i=f(),s=Object(u.h)(),j=Object(u.g)(),_=null===(e=s.state)||void 0===e?void 0:e.isOpenModalIngredient,m=null===(t=s.state)||void 0===t?void 0:t.isOpenModalError,b=null===(a=s.state)||void 0===a?void 0:a.isOpenModalDetails,x=null===(r=s.state)||void 0===r?void 0:r.isOpenModalFeed,g=null===(c=s.state)||void 0===c?void 0:c.isOpenModalOrder,y=at("accessToken"),S=at("refreshToken"),T=h((function(e){return e.authorization.isAuth}));Object(n.useEffect)((function(){i((function(e){e({type:E}),pe.getIngredients().then((function(t){t&&t.success?e({type:I,payload:t.data.map((function(e){return{id:e._id,name:e.name,price:e.price,type:e.type,image:e.image,image_mobile:e.image_mobile,image_large:e.image_large,proteins:e.proteins,fat:e.fat,carbohydrates:e.carbohydrates,calories:e.calories}}))}):e({type:C})})).catch((function(t){e({type:C})}))})),i(function(e,t){return function(a){a({type:$}),pe.getUser(e).then((function(e){e&&e.success?a({type:ee,payload:e.user}):a({type:te})})).catch((function(e){a(403===e?mt(t):{type:te})}))}}(y,S))}),[]),Object(n.useEffect)((function(){var e,t,a;if(T&&null!==(e=s.state)&&void 0!==e&&e.from_2)j.replace(null===s||void 0===s||null===(a=s.state)||void 0===a?void 0:a.from_2);else if(T&&null!==(t=s.state)&&void 0!==t&&t.from){var n;j.replace(null===s||void 0===s||null===(n=s.state)||void 0===n?void 0:n.from)}}),[T]);var R=Object(n.useCallback)((function(){j.goBack()}),[]),k=h((function(e){return e.getIngredientsApi.feedFailed})),D=h((function(e){return e.getIngredientsApi.feedRequest}));return Object(O.jsxs)(O.Fragment,{children:[k&&Object(O.jsx)("h2",{className:"text text_type_main-large",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),D&&Object(O.jsx)(p,{}),!k&&!D&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:o.a.app,children:[Object(O.jsx)("div",{className:o.a.header,children:Object(O.jsx)(Ne,{})}),Object(O.jsxs)(u.d,{location:b||m||_||x||g||s,children:[Object(O.jsx)(N,{path:"/login",exact:!0,children:Object(O.jsx)(ht,{})}),Object(O.jsx)(N,{path:"/register",exact:!0,children:Object(O.jsx)(yt,{})}),Object(O.jsx)(N,{path:"/forgot-password",exact:!0,children:Object(O.jsx)(It,{})}),Object(O.jsx)(N,{path:"/reset-password",exact:!0,children:Object(O.jsx)(Tt,{})}),Object(O.jsx)(u.b,{path:"/ingredients/:id",children:Object(O.jsx)(qt,{})}),Object(O.jsx)(u.b,{path:"/feed",exact:!0,children:Object(O.jsx)(Zt,{})}),Object(O.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(O.jsx)(oa,{})}),Object(O.jsx)(v,{path:"/profile/orders",exact:!0,isAuth:T,children:Object(O.jsx)(aa,{})}),Object(O.jsx)(v,{path:"/profile/orders/:id",isAuth:T,children:Object(O.jsx)(oa,{})}),Object(O.jsx)(v,{path:"/profile",isAuth:T,exact:!0,children:Object(O.jsx)(Ft,{})}),Object(O.jsx)(u.b,{path:"/",exact:!0,children:Object(O.jsx)(d.a,{backend:l.a,children:Object(O.jsxs)("div",{className:o.a.section,children:[Object(O.jsx)(qe,{}),Object(O.jsx)(Je,{})]})})}),Object(O.jsx)(u.b,{path:"*",children:Object(O.jsx)(ca,{})})]}),_&&Object(O.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(O.jsx)($e,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",closeModals:R,children:Object(O.jsx)(dt,{})})}),x&&Object(O.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(O.jsx)($e,{title:"",closeModals:R,children:Object(O.jsx)(_t,{})})}),g&&Object(O.jsx)(u.b,{path:"/profile/orders/:id",exact:!0,children:Object(O.jsx)($e,{title:"",closeModals:R,children:Object(O.jsx)(_t,{})})}),b&&Object(O.jsx)(u.b,{path:"/orderDetails",exact:!0,children:Object(O.jsx)($e,{title:"",closeModals:R,children:Object(O.jsx)(ct,{})})}),m&&Object(O.jsx)(u.b,{path:"/error",exact:!0,children:Object(O.jsx)($e,{title:"",closeModals:R,children:Object(O.jsx)(it,{})})})]})})]})},la=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,230)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},ua=a(39),ja=a(125),_a={openModal:!1,openModalOrder:!1,openModalError:!1},ma={feedRequest:!1,feedFailed:!1,price:0,selectedIdIngredients:[],orderDetails:[],infoOderDetails:[]},ba={feedRequest:!1,feedRequestPatchUser:!1,isAuth:!1,error:null,user:{email:null,name:null}},Oa={wsConnected:!1,data:[],error:void 0,request:!1,feedRequest:!1,feedFailed:!1},pa=Object(ua.b)({getIngredientsApi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!0,feedFailed:!1});case I:return Object(j.a)(Object(j.a)({},e),{},{ingredientsGetApi:t.payload,feedRequest:!1});case C:return Object(j.a)(Object(j.a)({},e),{},{feedFailed:!0,feedRequest:!1});case S:return t.payload.data.type===Se?Object(j.a)(Object(j.a)({},e),{},{ingredientForConstructor:Object(j.a)(Object(j.a)({},e.ingredientForConstructor),{},{bun:[t.payload]})}):Object(j.a)(Object(j.a)({},e),{},{ingredientForConstructor:Object(j.a)(Object(j.a)({},e.ingredientForConstructor),{},{others:[].concat(Object(Ie.a)(e.ingredientForConstructor.others),[t.payload])})});case T:var a=t.dragIndex,n=t.hoverIndex,r=e.ingredientForConstructor.others,c=r.splice(a,1)[0],i=(r.splice(n,0,c),r.slice());return Object(j.a)(Object(j.a)({},e),{},{ingredientForConstructor:Object(j.a)(Object(j.a)({},e.ingredientForConstructor),{},{others:Object(Ie.a)(i)})});case R:var s=t.payload;return Object(j.a)(Object(j.a)({},e),{},{ingredientForConstructor:Object(j.a)(Object(j.a)({},e.ingredientForConstructor),{},{others:Object(Ie.a)(e.ingredientForConstructor.others.filter((function(e,t){return t!==s})))})});case k:return Object(j.a)(Object(j.a)({},e),{},{ingredientForConstructor:Object(j.a)(Object(j.a)({},e.ingredientForConstructor),{},{bun:[],others:[]})});default:return e}},getInfoSelectedIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(j.a)(Object(j.a)({},e),{},{openModal:!0});case q:return Object(j.a)(Object(j.a)({},e),{},{openModal:!1,openModalOrder:!1,openModalError:!1});case L:case G:return Object(j.a)(Object(j.a)({},e),{},{openModalOrder:!0});case B:return Object(j.a)(Object(j.a)({},e),{},{openModalError:!0});default:return e}},getOrderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!0,feedFailed:!1});case z:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!1,infoOderDetails:t.payload});case H:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!1,feedFailed:!0});case Q:return Object(j.a)(Object(j.a)({},e),{},{price:t.payload});case J:return Object(j.a)(Object(j.a)({},e),{},{selectedIdIngredients:t.payload});case X:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!0,feedFailed:!1});case W:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!1,orderDetails:[t.payload]});case K:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!1,feedFailed:!0});default:return e}},authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!0});case V:var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),{},{email:a.email,name:a.name}),feedRequest:!1,isAuth:!0});case Y:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!1,isAuth:!1});case ee:var n=t.payload;return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),{},{email:n.email,name:n.name}),feedRequest:!1,isAuth:!0});case te:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!1,isAuth:!1});case Z:return Object(j.a)(Object(j.a)({},e),{},{isAuth:!0});case ae:case ne:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!0});case re:return Object(j.a)(Object(j.a)({},e),{},{feedRequest:!1,isAuth:!1});case ce:return Object(j.a)(Object(j.a)({},e),{},{feedRequestPatchUser:!0});case ie:var r=t.payload;return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),{},{email:r.user.email,name:r.user.name}),error:null,feedRequestPatchUser:!1});case se:var c=t.payload;return Object(j.a)(Object(j.a)({},e),{},{error:c,feedRequestPatchUser:!1});case ue:case oe:return Object(j.a)({},e);case de:return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),{},{email:"",name:""}),isAuth:!1});case le:return Object(j.a)({},e);default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(j.a)(Object(j.a)({},e),{},{error:void 0,request:!1,wsConnected:!0,feedRequest:!0});case A:return Object(j.a)(Object(j.a)({},e),{},{error:t.payload,wsConnected:!1,feedRequest:!1,feedFailed:!0});case F:return Object(j.a)(Object(j.a)({},e),{},{error:void 0,request:!0,feedRequest:!1,wsConnected:!0});case P:return Object(j.a)(Object(j.a)({},e),{},{error:void 0,data:[t.payload],feedRequest:!1});default:return e}}}),xa=["success"],fa={wsInit:D,onOpen:w,onClose:A,onError:F,onOrders:P},ha=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ua.c)(Object(ua.a)(ja.a,(ft=fa,function(e){var t=null;return function(a){return function(n){var r=e.dispatch,c=n.type,i=n.payload,s=ft.wsInit,o=ft.onOpen,d=ft.onClose,l=ft.onError,u=ft.onOrders;c===s&&(t=new WebSocket("".concat(i))),t&&(t.onopen=function(e){r({type:o,payload:e})},t.onerror=function(e){r({type:l,payload:e})},t.onmessage=function(e){var t=e.data,a=JSON.parse(t),n=(a.success,Object(_.a)(a,xa));r({type:u,payload:n})},t.onclose=function(e){r({type:d,payload:e})}),a(n)}}}))),ga=Object(ua.d)(pa,ha);i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(x.a,{store:ga,children:Object(O.jsx)(ye.a,{children:Object(O.jsx)(da,{})})})}),document.getElementById("root")),la()},25:function(e,t,a){e.exports={ingredients:"ingredients_ingredients__2_j5-",image:"ingredients_image__23ykS",name:"ingredients_name__3iais",items:"ingredients_items__1_P4T",item:"ingredients_item__3HxCM",count:"ingredients_count__3NilQ"}},31:function(e,t,a){e.exports={image:"ingredientDetails_image__3hAv-",name:"ingredientDetails_name__12KSq",items:"ingredientDetails_items__2ERon",item:"ingredientDetails_item__1IAWw",count:"ingredientDetails_count__2QRY_"}},32:function(e,t,a){e.exports={login:"login_login__2BT_K",form:"login_form__2gqeb",email:"login_email__3OhgQ",button:"login_button__12DV7",input:"login_input__UAbGT",link:"login_link__11ZGE",input_margin:"login_input_margin__2QzqU",paragraf:"login_paragraf__2zoPq"}},33:function(e,t,a){e.exports={link:"cardOrder_link__2wS6W",cardOrder:"cardOrder_cardOrder__2XCZ9",numberOrder:"cardOrder_numberOrder__1C1d8",idOrder:"cardOrder_idOrder__2a23H",burgerName:"cardOrder_burgerName__1kRn9",statusOrder:"cardOrder_statusOrder__1UZPX",ingredients:"cardOrder_ingredients__1Agc5",fillings:"cardOrder_fillings__2ggVu",cellPrice:"cardOrder_cellPrice__1iaO_",cell:"cardOrder_cell__1ZoNE"}},34:function(e,t,a){e.exports={profile:"profile_profile__H4shG",menuProfile:"profile_menuProfile__3O6JO",editForm:"profile_editForm__3ly5P",form:"profile_form__3OdRt",input:"profile_input__2-RlE",email:"profile_email__zXQH0",button:"profile_button__1aCSW",paragraf:"profile_paragraf__11WPC"}},35:function(e,t,a){e.exports={orders:"orders_orders__pOKyV",link:"orders_link__3dzjk",numberOrder:"orders_numberOrder__13Tjr",idOrder:"orders_idOrder__231is",burgerName:"orders_burgerName__3oyTP",ingredients:"orders_ingredients__3cB76",fillings:"orders_fillings__1tvRY",cellPrice:"orders_cellPrice__3dwpT",cell:"orders_cell__1NyWV"}},36:function(e,t,a){e.exports={numberOrder:"orderDetails_numberOrder__3CIrL",textIdOrder:"orderDetails_textIdOrder__2XOOQ",loadForm:"orderDetails_loadForm__3LQ12",loadImage:"orderDetails_loadImage__32kjV",rotation:"orderDetails_rotation__3xess",checkImage:"orderDetails_checkImage__2ZYVU",statusOrder:"orderDetails_statusOrder__XjM6f",status:"orderDetails_status__1CHuO"}},37:function(e,t,a){e.exports={register:"register_register__cXTHt",form:"register_form__2K_5j",email:"register_email__2r8dE",button:"register_button__AMxiT",input:"register_input__3Strp",input_margin:"register_input_margin__2HXpf",link:"register_link__1sOIE",paragraf:"register_paragraf__2crQI"}},40:function(e,t,a){e.exports={burgerIngredients:"burgerIngredients_burgerIngredients__3cLPf",title:"burgerIngredients_title__1mxWQ",ingredients:"burgerIngredients_ingredients__1lwXY",tab:"burgerIngredients_tab__p_Zs8",card:"burgerIngredients_card__3MUJq",item:"burgerIngredients_item__1xdEy",image:"burgerIngredients_image__1g8kh",counter:"burgerIngredients_counter__2F9bQ",price:"burgerIngredients_price__3UAsx",cost:"burgerIngredients_cost__d_asc",name:"burgerIngredients_name__T-wPQ"}},41:function(e,t,a){e.exports={link:"ingredientItem_link__2p18b",item:"ingredientItem_item__C7Pva",image:"ingredientItem_image__1UP6M",counter:"ingredientItem_counter__inwxq",price:"ingredientItem_price__gsPtg",cost:"ingredientItem_cost__3eKc5",name:"ingredientItem_name__2dHsZ"}},42:function(e,t,a){e.exports={burgerConstructor:"burgerConstructor_burgerConstructor__2phQ_",ingredients:"burgerConstructor_ingredients__3tom3",bun:"burgerConstructor_bun__3gUkQ",list:"burgerConstructor_list__17TAI",cellPrice:"burgerConstructor_cellPrice__1aEiO",buttonOrder:"burgerConstructor_buttonOrder__1LN-F"}},43:function(e,t,a){e.exports={forgotPassword:"forgot-password_forgotPassword__LpMie",form:"forgot-password_form__3Icm0",email:"forgot-password_email__PJFqY",button:"forgot-password_button__Wp74-",input:"forgot-password_input__1sDwX",link:"forgot-password_link__3Alsb",paragraf:"forgot-password_paragraf__1Tthy"}},44:function(e,t,a){e.exports={resetPassword:"reset-password_resetPassword__aHGag",input_margin:"reset-password_input_margin__3Ixmn",form:"reset-password_form__1b3Mg",button:"reset-password_button__2J5AP",input:"reset-password_input__3Xu4C",paragraf:"reset-password_paragraf__dTcQB"}},48:function(e,t,a){e.exports={nav:"menuProfile_nav__3xAHG",link:"menuProfile_link__3uL5Q","link_activ\u0435":"menuProfile_link_activ\u0435__2e768"}},53:function(e,t,a){e.exports={modal:"modal_modal__2qwSv",modalForm:"modal_modalForm__1dB_G",headerDetails:"modal_headerDetails__3-nQ4",closeButton:"modal_closeButton__2N_oI",headerText:"modal_headerText__2qKeI"}},54:function(e,t,a){e.exports={header:"feed_header__1-ZLP",feed:"feed_feed__JuBrh",title:"feed_title__K6TSX",orders:"feed_orders__--oeI",cards:"feed_cards__yCoCc"}},55:function(e,t,a){e.exports={orders:"orders_orders__3s7uc",menuProfile:"orders_menuProfile__2GFhd",ordersList:"orders_ordersList__3q-GC",cardOrder:"orders_cardOrder__1swTN",paragraf:"orders_paragraf__22RZ5"}},62:function(e,t,a){e.exports={filling:"orderElement_filling__1a8mB",filling_pozition:"orderElement_filling_pozition__1KFJM",count:"orderElement_count__3Az1s",image:"orderElement_image__1KDrU",imageFilter:"orderElement_imageFilter__3jUXT"}},72:function(e,t,a){e.exports={app:"app_app__2aEuY",section:"app_section__3ILkL",header:"app_header__3pkGJ"}},73:function(e,t,a){e.exports={loader:"loader_loader__34lrL",text:"loader_text__1YLBT",spinner:"loader_spinner__3eMdj",changeContent:"loader_changeContent__JWlCF"}},97:function(e,t,a){e.exports={ingredient:"elementBurger_ingredient__1BJS2",dragIcon:"elementBurger_dragIcon__67fT7"}}},[[222,1,2]]]);
//# sourceMappingURL=main.d0abc5e6.chunk.js.map